{"version":3,"sources":["../../../../../qreact-app/node_modules/he/bin/he"],"names":["fs","require","he","strings","process","argv","splice","stdin","data","timeout","action","options","log","console","main","option","count","test","version","join","exit","forEach","string","useNamedReferences","encodeEverything","allowUnsafeSymbols","decimal","isAttributeValue","strict","result","error","message","stack","isTTY","stdout","setTimeout","on","chunk","clearTimeout","push","trim","resume"],"mappings":";;AACC,aAAW;;AAEX,KAAIA,KAAKC,QAAQ,IAAR,CAAT;AACA,KAAIC,KAAKD,QAAQ,UAAR,CAAT;AACA,KAAIE,UAAUC,QAAQC,IAAR,CAAaC,MAAb,CAAoB,CAApB,CAAd;AACA,KAAIC,QAAQH,QAAQG,KAApB;AACA,KAAIC,IAAJ;AACA,KAAIC,OAAJ;AACA,KAAIC,MAAJ;AACA,KAAIC,UAAU,EAAd;AACA,KAAIC,MAAMC,QAAQD,GAAlB;;AAEA,KAAIE,OAAO,SAAPA,IAAO,GAAW;AACrB,MAAIC,SAASZ,QAAQ,CAAR,CAAb;AACA,MAAIa,QAAQ,CAAZ;;AAEA,MAAI,4BAA4BC,IAA5B,CAAiCF,MAAjC,CAAJ,EAA8C;AAC7CH,OACC,6BADD,EAECV,GAAGgB,OAFJ;AAIAN,OAAI,CACH,YADG,EAEH,wBAFG,EAGH,uFAHG,EAIH,iDAJG,EAKH,uBALG,EAMH,oBANG,EAOH,eAPG,EAQH,2EARG,EASH,2CATG,EAUFO,IAVE,CAUG,IAVH,CAAJ;AAWA,UAAOf,QAAQgB,IAAR,CAAaL,SAAS,CAAT,GAAa,CAA1B,CAAP;AACA;;AAED,MAAI,qBAAqBE,IAArB,CAA0BF,MAA1B,CAAJ,EAAuC;AACtCH,OAAI,KAAJ,EAAWV,GAAGgB,OAAd;AACA,UAAOd,QAAQgB,IAAR,CAAa,CAAb,CAAP;AACA;;AAEDjB,UAAQkB,OAAR,CAAgB,UAASC,MAAT,EAAiB;AAChC;AACA,OAAIA,UAAU,UAAd,EAA0B;AACzBZ,aAAS,QAAT;AACA;AACA;AACD,OAAIY,UAAU,UAAd,EAA0B;AACzBZ,aAAS,QAAT;AACA;AACA;AACD,OAAIY,UAAU,kBAAd,EAAkC;AACjCZ,aAAS,QAAT;AACAC,YAAQY,kBAAR,GAA6B,IAA7B;AACA;AACA;AACD,OAAID,UAAU,cAAd,EAA8B;AAC7BZ,aAAS,QAAT;AACAC,YAAQa,gBAAR,GAA2B,IAA3B;AACA;AACA;AACD,OAAIF,UAAU,gBAAd,EAAgC;AAC/BZ,aAAS,QAAT;AACAC,YAAQc,kBAAR,GAA6B,IAA7B;AACA;AACA;AACD,OAAIH,UAAU,WAAd,EAA2B;AAC1BZ,aAAS,QAAT;AACAC,YAAQe,OAAR,GAAkB,IAAlB;AACA;AACA;AACD,OAAIJ,UAAU,UAAd,EAA0B;AACzBZ,aAAS,QAAT;AACA;AACA;AACD,OAAIY,UAAU,aAAd,EAA6B;AAC5BZ,aAAS,QAAT;AACAC,YAAQgB,gBAAR,GAA2B,IAA3B;AACA;AACA;AACD,OAAIL,UAAU,UAAd,EAA0B;AACzBZ,aAAS,QAAT;AACAC,YAAQiB,MAAR,GAAiB,IAAjB;AACA;AACA;AACD;AACA,OAAIC,MAAJ;AACA,OAAI,CAACnB,MAAL,EAAa;AACZE,QAAI,+DAAJ;AACAA,QAAI,uCAAJ;AACA,WAAOR,QAAQgB,IAAR,CAAa,CAAb,CAAP;AACA;AACD,OAAI;AACHS,aAAS3B,GAAGQ,MAAH,EAAWY,MAAX,EAAmBX,OAAnB,CAAT;AACAC,QAAIiB,MAAJ;AACAb;AACA,IAJD,CAIE,OAAMc,KAAN,EAAa;AACdlB,QAAIkB,MAAMC,OAAN,GAAgB,IAApB;AACAnB,QAAI,sBAAJ,EAA4BF,MAA5B;AACAE,QAAI,qDAAJ;AACAA,QAAI,gDAAJ;AACAA,QACC,8BADD,EAECV,GAAGgB,OAFJ;AAIAN,QAAIkB,MAAME,KAAV;AACA,WAAO5B,QAAQgB,IAAR,CAAa,CAAb,CAAP;AACA;AACD,GAnED;AAoEA,MAAI,CAACJ,KAAL,EAAY;AACXJ,OAAI,uCAAJ;AACAA,OAAI,uCAAJ;AACA,UAAOR,QAAQgB,IAAR,CAAa,CAAb,CAAP;AACA;AACD;AACA;AACA,SAAOhB,QAAQgB,IAAR,CAAa,CAAb,CAAP;AACA,EAxGD;;AA0GA,KAAIb,MAAM0B,KAAV,EAAiB;AAChB;AACAnB;AACA,EAHD,MAGO;AACN;AACA;AACA,MAAI,CAACV,QAAQ8B,MAAR,CAAeD,KAApB,EAA2B;AAC1B;AACA;AACA;AACAxB,aAAU0B,WAAW,YAAW;AAC/B;AACA;AACArB;AACA,IAJS,EAIP,KAJO,CAAV;AAKA;AACDN,SAAO,EAAP;AACAD,QAAM6B,EAAN,CAAS,MAAT,EAAiB,UAASC,KAAT,EAAgB;AAChCC,gBAAa7B,OAAb;AACAD,WAAQ6B,KAAR;AACA,GAHD;AAIA9B,QAAM6B,EAAN,CAAS,KAAT,EAAgB,YAAW;AAC1BjC,WAAQoC,IAAR,CAAa/B,KAAKgC,IAAL,EAAb;AACA1B;AACA,GAHD;AAIAP,QAAMkC,MAAN;AACA;AAED,CAlJA,GAAD","file":"he.js","sourcesContent":["\n(function() {\n\n\tvar fs = require('fs');\n\tvar he = require('../he.js');\n\tvar strings = process.argv.splice(2);\n\tvar stdin = process.stdin;\n\tvar data;\n\tvar timeout;\n\tvar action;\n\tvar options = {};\n\tvar log = console.log;\n\n\tvar main = function() {\n\t\tvar option = strings[0];\n\t\tvar count = 0;\n\n\t\tif (/^(?:-h|--help|undefined)$/.test(option)) {\n\t\t\tlog(\n\t\t\t\t'he v%s - https://mths.be/he',\n\t\t\t\the.version\n\t\t\t);\n\t\t\tlog([\n\t\t\t\t'\\nUsage:\\n',\n\t\t\t\t'\\the [--escape] string',\n\t\t\t\t'\\the [--encode] [--use-named-refs] [--everything] [--allow-unsafe] [--decimal] string',\n\t\t\t\t'\\the [--decode] [--attribute] [--strict] string',\n\t\t\t\t'\\the [-v | --version]',\n\t\t\t\t'\\the [-h | --help]',\n\t\t\t\t'\\nExamples:\\n',\n\t\t\t\t'\\the --escape \\\\<img\\\\ src\\\\=\\\\\\'x\\\\\\'\\\\ onerror\\\\=\\\\\"prompt\\\\(1\\\\)\\\\\"\\\\>',\n\t\t\t\t'\\techo \\'&copy; &#x1D306;\\' | he --decode'\n\t\t\t].join('\\n'));\n\t\t\treturn process.exit(option ? 0 : 1);\n\t\t}\n\n\t\tif (/^(?:-v|--version)$/.test(option)) {\n\t\t\tlog('v%s', he.version);\n\t\t\treturn process.exit(0);\n\t\t}\n\n\t\tstrings.forEach(function(string) {\n\t\t\t// Process options\n\t\t\tif (string == '--escape') {\n\t\t\t\taction = 'escape';\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (string == '--encode') {\n\t\t\t\taction = 'encode';\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (string == '--use-named-refs') {\n\t\t\t\taction = 'encode';\n\t\t\t\toptions.useNamedReferences = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (string == '--everything') {\n\t\t\t\taction = 'encode';\n\t\t\t\toptions.encodeEverything = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (string == '--allow-unsafe') {\n\t\t\t\taction = 'encode';\n\t\t\t\toptions.allowUnsafeSymbols = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (string == '--decimal') {\n\t\t\t\taction = 'encode';\n\t\t\t\toptions.decimal = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (string == '--decode') {\n\t\t\t\taction = 'decode';\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (string == '--attribute') {\n\t\t\t\taction = 'decode';\n\t\t\t\toptions.isAttributeValue = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (string == '--strict') {\n\t\t\t\taction = 'decode';\n\t\t\t\toptions.strict = true;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Process string(s)\n\t\t\tvar result;\n\t\t\tif (!action) {\n\t\t\t\tlog('Error: he requires at least one option and a string argument.');\n\t\t\t\tlog('Try `he --help` for more information.');\n\t\t\t\treturn process.exit(1);\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tresult = he[action](string, options);\n\t\t\t\tlog(result);\n\t\t\t\tcount++;\n\t\t\t} catch(error) {\n\t\t\t\tlog(error.message + '\\n');\n\t\t\t\tlog('Error: failed to %s.', action);\n\t\t\t\tlog('If you think this is a bug in he, please report it:');\n\t\t\t\tlog('https://github.com/mathiasbynens/he/issues/new');\n\t\t\t\tlog(\n\t\t\t\t\t'\\nStack trace using he@%s:\\n',\n\t\t\t\t\the.version\n\t\t\t\t);\n\t\t\t\tlog(error.stack);\n\t\t\t\treturn process.exit(1);\n\t\t\t}\n\t\t});\n\t\tif (!count) {\n\t\t\tlog('Error: he requires a string argument.');\n\t\t\tlog('Try `he --help` for more information.');\n\t\t\treturn process.exit(1);\n\t\t}\n\t\t// Return with exit status 0 outside of the `forEach` loop, in case\n\t\t// multiple strings were passed in.\n\t\treturn process.exit(0);\n\t};\n\n\tif (stdin.isTTY) {\n\t\t// handle shell arguments\n\t\tmain();\n\t} else {\n\t\t// Either the script is called from within a non-TTY context, or `stdin`\n\t\t// content is being piped in.\n\t\tif (!process.stdout.isTTY) {\n\t\t\t// The script was called from a non-TTY context. This is a rather uncommon\n\t\t\t// use case we don’t actively support. However, we don’t want the script\n\t\t\t// to wait forever in such cases, so…\n\t\t\ttimeout = setTimeout(function() {\n\t\t\t\t// …if no piped data arrived after a whole minute, handle shell\n\t\t\t\t// arguments instead.\n\t\t\t\tmain();\n\t\t\t}, 60000);\n\t\t}\n\t\tdata = '';\n\t\tstdin.on('data', function(chunk) {\n\t\t\tclearTimeout(timeout);\n\t\t\tdata += chunk;\n\t\t});\n\t\tstdin.on('end', function() {\n\t\t\tstrings.push(data.trim());\n\t\t\tmain();\n\t\t});\n\t\tstdin.resume();\n\t}\n\n}());\n"]}